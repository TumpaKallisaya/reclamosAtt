window.adpushup=window.adpushup||{},adpushup.runAp=function(a){window.apjQuery=adpushup.configure.config.initVersion&&adpushup.configure.config.initVersion>=1?a:a.noConflict(!0),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={engineUrl:"//e3.adpushup.com/E3WebService/e3",feedbackUrl:"//e3.adpushup.com/E3WebService/feedback",consoleUrl:"//optimize.adpushup.com/console/console.js",dummyFeedbackUrl:"//dev.adpushup.com/titanic/feedback",postscribeUrl:"https://cdnjs.cloudflare.com/ajax/libs/postscribe/2.0.5/postscribe.min.js",engineRequestTimeout:2500,xpathWaitTimeout:5e3,fallbackAdsDelay:700,fallbackAdsCount:3,adpushupPercentage:50,mode:2,displayMethod:2,explicitPlatform:!0,setupMap:{DESKTOP:["HOME","POST"],MOBILE:["HOME","POST"],TABLET:["HOME","POST"]},domain:"",minInterval:3e4,heartBeatStartDelay:2e3,heartBeatUrl:"dev.adpushup.com/heartbeatUrl",logTimelineEvent:!0,logAdDisplayedEvent:!1}},{}],2:[function(a,b,c){b.exports={generateAdCode:function(a,b){var c;switch(a.toLowerCase()){case"adsense":b.adslot?(c=[],b.isSync?(c.push('<script type="text/javascript"><!--'),c.push('google_ad_client = "'+b.pubId+'"; \n /* '+b.adslot+' */ \n google_ad_slot = "'+b.adslot+'";'),c.push('google_ad_width = "'+b.width+'"; \n google_ad_height = "'+b.height+'"; \n//-->'),c.push('</script>\n <script type="text/javascript"\n src="//pagead2.googlesyndication.com/pagead/show_ads.js"> \n</script>')):(c.push('<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>'),b.isSmartSize?(c.push("<!-- Responsive -->"),c.push('<ins class="adsbygoogle" style="display:block" data-ad-client="'+b.pubId+'" data-ad-slot="'+b.adslot+'" data-ad-format="'+b.adType+'"></ins>')):b.isResponsive?(c.unshift(b.style),c.push("<!-- Responsive -->"),c.push('<ins class="'+b.className+'" style="display:inline-block;" data-ad-client="'+b.pubId+'" data-ad-slot="'+b.adslot+'"></ins>')):c.push('<ins class="adsbygoogle" style="display:inline-block;width:'+b.width+"px;height:"+b.height+'px" data-ad-client="'+b.pubId+'" data-ad-slot="'+b.adslot+'"></ins>'),c.push("<script> (adsbygoogle = window.adsbygoogle || []).push({}); </script>"))):c=['<script type="text/javascript">','google_ad_client = "'+b.pubId+'";',"google_ad_width = "+b.width+";","google_ad_height = "+b.height+";",'google_ad_format = "'+b.width+"x"+b.height+'_as";','google_ad_type = "'+b.adType+'";','google_color_border = "'+b.borderColor+'";','google_color_bg = "'+b.backgroundColor+'";','google_color_link = "'+b.urlColor+'";','google_color_text = "'+b.textColor+'";','google_color_url = "'+b.urlColor+'";',"</script>",'<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script>'];break;case"dummy":c='<iframe src="http://adpushup.github.io/adpage.html?width='+b.width+"&height="+b.height+'"  scrolling="no" width="'+b.width+'" height="'+b.height+'"></iframe>';break;default:return!1}return"string"==typeof c?c:c.join("\n")}}},{}],3:[function(a,b,c){var d=a("./browserConfig.js"),e=window,f=e.apjQuery;b.exports={trackActiveView:function(a,b){var c,g=!1,h=!1,i=a instanceof f?a:f(a),j=i.offset().left+i.width()/2,k=i.offset().top+i.height()/2,l=function(a){if(!h){var i=a||{},l=f(e).scrollTop(),n=l+f(e).height(),o=f(e).scrollLeft(),p=o+f(e).width();k>l&&n>k&&j>o&&p>j?g&&i.activeViewCheck?(!d.pageVisibility.supported||"visible"===d.pageVisibility.getVisiblityState())&&(h=!0)&&b():(!g&&m(),g=!0):(c&&(e.clearInterval(c),c=null),g=!1)}},m=function(){c=e.setTimeout(function(){l({activeViewCheck:!0})},1e3)};l(),f(e).scroll(function(){l()})}}},{"./browserConfig.js":4}],4:[function(a,b,c){var d=window.apjQuery,e={name:"other",$pingEl:null,pageVisibility:{supported:!1,type:null,vendorPrefix:null,visibilityStateKey:"visibilityState",visibilitychangeEventName:"visibilitychange"},dataSendingMethod:null,unloadMethod:null,trackerSupported:!1};!function(){var a=navigator.userAgent;try{(window.opera||a.indexOf(" OPR/")>=0)&&-1===a.indexOf("Opera Mini")?e.name="opera":-1!==a.indexOf("Edge")?e.name="edge":"undefined"!=typeof InstallTrigger?e.name="firefox":/Android/i.test(a)&&"undefined"!=typeof navigator.vendor&&navigator.vendor.indexOf("Google")>-1&&/ Version\/[^ ]+ Chrome/i.test(a)?e.name="chrome-wv":-1!==a.indexOf(" CriOS/")?e.name="safari-chrome":window.chrome&&a.match(/chrome/i)?e.name="chrome":document.documentMode?e.name="ie":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0&&/AppleWebKit/i.test(a)&&(/(iPhone|iPod|iPad)/i.test(a)&&-1!==a.indexOf("Safari")&&-1!==a.indexOf("Version")?e.name="safari-mobile":-1!==a.indexOf("Safari")&&-1!==a.indexOf("Version")?e.name="safari":e.name="safari-wv"),"chrome"!==e.name&&(e.name="other")}catch(b){}}(),function(){var a,b=e.pageVisibility;b.supported=!0,b.type="standard",void 0!==document.visibilityState?a="":void 0!==document.webkitVisibilityState?a="webkit":void 0!==document.mozVisibilityState?a="moz":void 0!==document.msVisibilityState?a="ms":void 0!==document.hasFocus?b.type="blur":(b.type=null,b.supported=!1),b.vendorPrefix=a,b.visibilityStateKey=a?a+"VisibilityState":"visibilityState",b.visibilitychangeEventName=a?a+"visibilitychange":"visibilitychange"}(),function(){navigator&&"function"==typeof navigator.sendBeacon?e.dataSendingMethod="sendBeacon":(e.name.match(/^safari*/)||e.name.match(/chrome*/)||"opera"===e.name)&&"undefined"!=typeof document.createElement("a").ping&&(e.dataSendingMethod="ping")}(),function(){e.unloadMethod=e.name.match("safari*")?"pagehide":"beforeunload"}(),function(){"ping"===e.dataSendingMethod&&d(function(){d("body").append('<a id="_ap_ping_tracker" href="javascript::void(0)" style="display:none" ping="">ping</a>'),e.$pingEl=d("#_ap_ping_tracker"),e.$pingEl.click(function(a){a.stopPropagation(),a.stopImmediatePropagation()})})}(),function(){e.trackerSupported=!("other"===e.name||!e.pageVisibility.supported||("safari-mobile"===e.name||"safari-wv"===e.name)&&"function"!=typeof window.requestAnimationFrame)}(),e.pageVisibility.isPageVisible=function(){var a=e.pageVisibility;return a.supported?"standard"===a.type?"visible"===document[a.visibilityStateKey]:document.hasFocus():-1},e.pageVisibility.getVisiblityState=function(){var a=e.pageVisibility;return a.supported?"standard"===a.type?document[a.visibilityStateKey]:document.hasFocus()?"visible":"hidden":!1},e.pageVisibility.onChange=function(a,b){function c(c){var e,f={focus:"visible",pageshow:"visible",blur:"hidden",pagehide:"hidden"},g=c||window.event,h=g.type;e=function(c){window.currentState!==c&&(window.currentState=c,"hidden"===c?a():b())},this[d.vendorPrefix+"hidden"]?e("hidden",g.type):e("visible",g.type),"visible"===f[h]?e("visible",g.type):setTimeout(function(){document.hasFocus()||e("hidden",h)},1e3)}var d=e.pageVisibility;window.currentState=e.pageVisibility.getVisiblityState(),"standard"===d.type?document.addEventListener(d.visibilitychangeEventName,c):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=c},b.exports=e},{}],5:[function(a,b,c){function d(){this.ct=null,this.ads=[],this.err=[],this.init()}var e=a("./utils.js"),f=a("./browserConfig.js"),g=window,h=g.apjQuery;d.prototype.init=function(){if("object"==typeof g.adpushup.control&&g.adpushup.control instanceof Array)for(var a=0,b=g.adpushup.control,c=b[a];a<b.length;c=b[++a])this.push(c)},d.prototype.push=function(a){var b={el:a,ac:a.getAttribute("data-ac"),id:"_ap_control_ad_"+(this.ads.length+1),ver:a.getAttribute("data-ver"),siteId:a.getAttribute("data-siteId")};this.ads.push(b),g.adpushup.siteId=g.adpushup.siteId||a.getAttribute("data-siteId"),this.ct&&this.activate(b)},d.prototype.activate=function(a){if(!a.active){var b=h("<div/>").css({display:"block"}).attr({id:a.id,"class":"_ap_control_ad"});h(a.el).html(b);try{h.ajaxSettings.cache=!0,a.ver>1?b.append(e.base64Decode(a.ac)):e.runPostScribe(b,e.base64Decode(a.ac)),(this.tL.tl_cntAd=this.tL.tl_cntAd||[]).push(+new Date),h.ajaxSettings.cache=!1,this.tracker.add(b,function(){this.ccf.clickFeedbackMethod=f.dataSendingMethod,14!==this.cif.mode&&e.sendBeacon(this.feedbackUrl,this.ccf)}.bind(this)),a.active=!0}catch(c){this.err.push({msg:"Error in replaying ad.",ad:a,error:c})}}},d.prototype.trigger=function(a){h.extend(this,a);for(var b=0,c=this.ads,d=c[b];b<c.length;d=c[++b])this.activate(d);14!==a.cif.mode&&e.sendBeacon(this.feedbackUrl,a.cif,{method:"image"})},b.exports=d},{"./browserConfig.js":4,"./utils.js":9}],6:[function(a,b,c){var d=a("./browserConfig.js"),e=a("./utils.js"),f=window.apjQuery;b.exports=function(a,b,c,g){var h,i,j,k,l,m=b||3e4,n=c||2e3,o=g||+new Date,p=0,q=o;return k=function(a){var b=+new Date;return"focus"===a?(q=b,void l.start()):("blur"===a&&l.stop(),void(b-q>m&&l.sendRequest()))},f(window).on("blur",function(){document.hasFocus&&!document.hasFocus||k("blur")}),f(window).on("focus",function(){k("focus")}),f(document).on("mouseout",function(a){var b=a.relatedTarget||a.toElement;null===b&&k("mouseout")}),l={start:function(){var a=this;j||((!i||n>i)&&(i=n),j=setTimeout(function(){if(j=null,d.pageVisibility.isPageVisible()){if(h||(h=!document.hasFocus||document.hasFocus()),!h)return void a.start();i=2*i,a.sendRequest(),a.start()}},i))},stop:function(){clearTimeout(j),j=null},sendRequest:function(){var a=+new Date;p+=a-q,q=a,e.sendFeedback({type:7,timeOnSite:p})}}}},{"./browserConfig.js":4,"./utils.js":9}],7:[function(a,b,c){"use strict";function d(a,b,c){function d(){e&&(document.head.removeChild(e),e=null),document.removeEventListener("animationstart",g),document.removeEventListener("MSAnimationStart",g),document.removeEventListener("webkitAnimationStart",g)}var e,f="insQ_"+l++,g=function(b){b.animationName!==f&&b[n]!==f||k.call(b.target,a)&&(c.resolve(i(b.target),2),d())};e=document.createElement("style"),e.innerHTML="@"+o+"keyframes "+f+" {  from {  opacity: 0.99;  } to {  opacity: 1; }  }\n"+a+" { animation-duration: 0.001s; animation-name: "+f+"; "+o+"animation-duration: 0.001s; "+o+"animation-name: "+f+";  } ",document.head.appendChild(e),document.addEventListener("animationstart",g,!1),document.addEventListener("MSAnimationStart",g,!1),document.addEventListener("webkitAnimationStart",g,!1),i(function(){"pending"===c.state()&&setTimeout(function(){return"pending"!==c.state()?!1:(d(),void c.reject(a,2))},b||1e4)})}function e(a,b,c){var d,e=i(a),f=500,g=1,h=(b||1e4)/f;e.length?c.resolve(e,1):d=setInterval(function(){e=i(a),e.length?(clearInterval(d),c.resolve(e,1)):p&&g>=h&&(clearInterval(d),c.reject(a,1)),g++},f)}function f(a){try{return"function"==typeof document.querySelector?(document.querySelector(a),!0):!1}catch(b){return!1}}function g(a,b){var c=i.Deferred();return m=!1,m&&f(a)?d(a,b,c):e(a,b,c),c.promise()}var h,i=window.apjQuery,j=window.document.documentElement,k=j.matches||j.matchesSelector||j.webkitMatchesSelector||j.mozMatchesSelector||j.msMatchesSelector||j.oMatchesSelector,l=100,m=!1,n="animationName",o="",p=!1,q="Webkit Moz O ms Khtml".split(" "),r="",s=document.createElement("div");if(i(function(){p=!0}),"function"==typeof document.addEventListener&&(s.style.animationName&&(m=!0),m===!1))for(h=0;h<q.length;h++)if(void 0!==s.style[q[h]+"AnimationName"]){r=q[h],n=r+"AnimationName",o="-"+r.toLowerCase()+"-",m=!0;break}b.exports={watch:g}},{}],8:[function(a,b,c){function d(a,b){if(!b||"function"!=typeof b)throw new Error("Tracking node need a callback");if(!(a instanceof h))throw new Error("Tracking node need jquery element");this.el=a.get(0),this.$el=a,this.callbackCalled=!1;var c=this;this.callback=function(){c.callbackCalled=!0,b.apply(null,arguments)},this.blurTS=null}function e(){this.version=3.1,this.checkTimeout=3e3,this.nodesToTrack=[],this.lastNodeActive=null,this.event=null,this.eventlastReqAnimTime=null,this.eventBlurTs=null,this.lastPageHiddenTs=null,this.setupListener()}var f=window,g=document,h=f.apjQuery,i=a("./browserConfig.js");e.prototype.setupListener=function(){if(!i.trackerSupported)return!1;var a=this;h(g).ready(function(){f.focus()}),h(f).on("blur",function(){a.eventBlurTs=+new Date,"firefox"===i.name?setTimeout(function(){a.event="blur",a.isTrackingNodeClicked()},700):"safari-mobile"!==i.name&&"safari-wv"!==i.name||"function"!=typeof f.requestAnimationFrame?(a.event="blur",a.isTrackingNodeClicked()):(!function(){function b(){a.eventlastReqAnimTime=+new Date,c=f.requestAnimationFrame(b)}var c=null;a.eventlastReqAnimTime=+new Date,c=f.requestAnimationFrame(b),setTimeout(function(){f.cancelAnimationFrame(c)},1500)}(),a.event="blur",a.isTrackingNodeClicked())}),i.pageVisibility.onChange(function(){a.event="visibility",a.isTrackingNodeClicked()},function(){}),"function"==typeof f.addEventListener?f.addEventListener(i.unloadMethod,function(){a.event="onBU",a.isTrackingNodeClicked()},!0):f.attachEvent&&f.attachEvent("on"+i.unloadMethod,function(){a.event="onBU",a.isTrackingNodeClicked()})},e.prototype.isTrackingNodeClicked=function(){var a;switch(this.event){case"blur":if(a=this.getActiveNode(),!a||a&&a.callbackCalled)return!1;this.lastPageHiddenTs&&+new Date-this.lastPageHiddenTs<=this.checkTimeout?a.callback(a):(a.blurTs=this.eventBlurTs,this.lastNodeActive=a);break;case"visibility":this.lastNodeActive&&!this.lastNodeActive.callbackCalled&&Math.abs(+new Date-this.lastNodeActive.blurTs)<=this.checkTimeout?this.lastNodeActive.callback(this.lastNodeActive):this.lastPageHiddenTs=+new Date;break;case"onBU":if(this.lastNodeActive&&!this.lastNodeActive.callbackCalled&&(Math.abs(+new Date-this.lastNodeActive.blurTs)<=this.checkTimeout||("safari-mobile"===i.name||"safari-wv"===i.name)&&Math.abs(this.eventlastReqAnimTime-this.lastNodeActive.blurTs)<=1e3))this.lastNodeActive.callback(this.lastNodeActive);else if("firefox"===i.name&&Math.abs(+new Date-this.eventBlurTs)<=this.checkTimeout){if(a=this.getActiveNode(),!a||a&&a.callbackCalled)return!1;a.callback(a)}}},e.prototype.customContains=function(a,b){return h.contains(a.el,b)},e.prototype.getActiveNode=function(){if(g.activeElement&&"undefined"!=typeof g.activeElement&&"IFRAME"===g.activeElement.nodeName){for(var a=0;a<this.nodesToTrack.length;a++)if(this.customContains(this.nodesToTrack[a],g.activeElement))return this.nodesToTrack[a];return!1}return!1},e.prototype.add=function(a,b,c){if(a instanceof h){var e=new d(a,b,c);this.nodesToTrack.push(e),a.on("mouseout",function(){h(f).focus()}).on("mouseover",function(){h(f).focus()})}},b.exports=e},{"./browserConfig.js":4}],9:[function(a,b,c){var d=a("./browserConfig.js"),e=window.apjQuery;b.exports={sendFeedback:function(a){var b,c=window.adpushup.ap;if(14===c.config.mode)return!0;switch(c.sT.cF.push(10),b={packetId:c.config.packetId,siteId:c.config.siteId,pageGroup:c.config.pageGroup,urlMd5:c.sT.urlMd5},a.type){case 1:b.apJsVersion=c.version,b.eventType=1,b.tracking=d.trackerSupported,b.displayMethod=c.sT.displayMethod,a.timeline&&(b.timeline=JSON.stringify(a.timeline)),b.ads=JSON.stringify(a.feedback);break;case 2:b.eventType=5,b.adpushupDetectedMode=a.mode;break;case 3:b.eventType=6,b.adpushupDetectedMode=a.mode;break;case 4:b.url=c.config.pageUrl,b.eventType=7,b.pageVisible=d.pageVisibility.getVisiblityState(),c.$.extend(b,a.timeline);break;case 5:b.url=c.config.pageUrl,b.eventType=7,c.$.extend(b,a),delete b.type;break;case 6:b.eventType=8,b.ad=a.ad,b.av_ts=a.ts;break;case 7:b.eventType=9,b.timeOnSite=a.timeOnSite}return this.sendBeacon(c.config.feedbackUrl,b,{method:"image"})},uniqueId:function(a,b){b=b||!1;var c;return c=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a},c=(a||"")+c(parseInt((new Date).getTime()/1e3,10),8)+c(Math.floor(123456789*Math.random())+1,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c},requestServer:function(a,b,c,d,f){return e.support.cors=!0,e.ajax({url:a,data:b,timeout:c,type:d||"GET",beforeSend:f,dataType:"jsonp",jsonpCallback:"apCallback",crossDomain:!0})},sendBeacon:function(a,b,c){if("string"!=typeof a||"object"!=typeof b)return!1;var e,f,g,h,i=window.adpushup.ap;if(i.config.cookie&&i.$.extend(b,i.config.cookie),c=c||{},e=new Date,1!==b.eventType&&3!==b.eventType||(b.initCodeVersion=i.config.initVersion,b.pageVisible=d.pageVisibility.isPageVisible(),b.hourOfDay=e.getHours(),b.date=e.getDate(),b.month=e.getMonth()+1,b.year=e.getFullYear()),b=this.objToUrl(b),f=a+"?ts="+ +new Date+b,"image"===c.method)return(new Image).src=f,!0;switch(d.dataSendingMethod){case"sendBeacon":g=navigator.sendBeacon(f),!g&&((new Image).src=f);break;case"ping":if("undefined"!==document.createEvent)try{h=document.createEvent("MouseEvent"),h.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.$pingEl.attr("ping",f).get(0).dispatchEvent(h)}catch(j){}else(new Image).src=f;break;default:(new Image).src=f}return!0},objToUrl:function(a){if("object"!=typeof a)return!1;var b,c,d="";for(b in a)if(a.hasOwnProperty(b))if(a[b]instanceof Array)for(c=0;c<a[b].length;c++)d+="&"+b+(c+1)+"="+a[b][c];else d+="&"+b+"="+a[b];return d},base64Decode:function(a){if(window.atob)return window.atob(a);var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a+="";do e=j.indexOf(a.charAt(k++)),f=j.indexOf(a.charAt(k++)),g=j.indexOf(a.charAt(k++)),h=j.indexOf(a.charAt(k++)),i=e<<18|f<<12|g<<6|h,b=i>>16&255,c=i>>8&255,d=255&i,64===g?n[l++]=String.fromCharCode(b):64===h?n[l++]=String.fromCharCode(b,c):n[l++]=String.fromCharCode(b,c,d);while(k<a.length);return m=n.join(""),decodeURIComponent(escape(m.replace(/\0+$/,"")))},runPostScribe:function(){var a=[],b=!1,c=!1,d=function(){var b,c=0;for(c=0;c<a.length;c++)b=a[c],window.postScribe(b.container,b.adCode)};return function(e,f){return window.postscribe?void window.postscribe(e,f):(a.push({container:e,adCode:f}),c||b?void 0:(window.adpushup.utils.loadScript(window.adpushup.ap.config.postscribeUrl,function(){b=!0,d()}),void(c=!0)))}}()},function(){Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}()},{"./browserConfig.js":4}],10:[function(a,b,c){var d=a("./config/config.js"),e=a("./libs/custom/utils.js"),f=a("./libs/custom/adCodeGenerator.js"),g=a("./libs/custom/control.js"),h=a("./libs/custom/tracker.js"),i=a("./libs/custom/nodeWatcher.js"),j=a("./libs/custom/browserConfig.js"),k=a("./libs/custom/analytics.js"),l=a("./libs/custom/heartBeat.js"),m=window,n=document,o=m.apjQuery,p=m.adpushup=m.adpushup||{},q=p.timeline=p.timeline||{},r=p.ap={},s={};q.tl_apLoaded=+new Date,r.version=6.1,r.config=d,r.apConfigs={"blocklist":[],"mode":1,"displayMethod":2,"adpushupPercentage":90,"engineRequestTimeout":2500,"explicitPlatform":false,"xpathWaitTimeout":5000,"setupMap":{"DESKTOP":["HOME","PAGE","DATABASE","COMPANYPAGE","PHONEPAGE","PHONEINFO"],"MOBILE":["PAGE","HOME","PHONEPAGE","DATABASE","COMPANYPAGE","PHONEINFO"]}},r.$=o,r.tracker=new h,r.err=[],r.sT={code:200,apVersion:r.version,siteId:null,siteDomain:null,pageUrl:null,pageGroup:null,referrer:null,cms:null,pluginVer:null,cF:[]},r.$.extend(r.config,r.apConfigs),r.$.extend(r,{configure:function(a){var b;if("object"==typeof a){for(b in a)switch(b){case"siteId":a.siteId=a.siteId?parseInt(a.siteId,10):null;break;case"pageGroup":a.pageGroup=a.pageGroup.toUpperCase();break;case"siteDomain":a.siteDomain=a.siteDomain?encodeURIComponent(a.siteDomain.replace(/^www\./i,"")):null;break;case"pageUrl":a.pageUrl=a.pageUrl?encodeURIComponent(a.pageUrl):null}r.$.extend(r.config,a);for(b in this.sT)"undefined"!=typeof a[b]&&(this.sT[b]=this.config[b]);return this.sT.cF.push(1),!0}return!1},init:function(){var a,b,c,d;if(this.sT.initiated)return!1;if(this.sT.initiated=!0,s.jqLoadDuration=q.tl_jqLoaded-q.tl_adpStart,s.apLoadDuration=q.tl_apLoaded-q.tl_adpStart,s.apInitDuration=+new Date-q.tl_adpStart,this.config.domain&&this.config.pageUrl.indexOf(this.config.domain)>-1&&this.reCreateCookie(this.config.cookieSettings,this.domain),this.config.blocklist&&this.config.blocklist instanceof Array)for(b=0,c=this.config.blocklist,d=c[b];b<c.length;d=c[++b])if(m.location.href.match(new RegExp(d,"i")))return p.disable=!0,!1;if(this.processCommands(),a=l(this.config.heartBeatUrl,this.config.minInterval,this.config.heartBeatDelay,q.tl_apLoaded),a.start(),this.config.forceDisable)return!1;if(p.control=new g,this.config.forceDummyFeedback&&(this.config.feedbackUrl=this.config.dummyFeedbackUrl),this.sT.cF.push(2),this.config.referrer=encodeURIComponent(n.referrer)||null,1===this.config.mode&&(!this.config.adpushupPercentage||this.config.rand>this.config.adpushupPercentage/100)&&(this.config.mode=4),this.config.forceControl&&(this.config.mode=5),this.config.adpushupDetectedMode=this.config.mode,!this.config.forceAdpushup&&this.config.mode>1){switch(this.config.mode){case 2:this.sT.ct="draftMode";break;case 3:this.sT.ct="determined";break;case 4:this.sT.ct="planned";break;case 5:this.sT.ct="forced";break;case 14:this.sT.ct="standby";break;default:this.sT.ct="unknown"}this.triggerControl()}},reCreateCookie:function(a,b){b&&p.utils.createCookie(a.uuidKey,this.config.cookie.uuidKey,a.cookieExpiryTime,b)},triggerAdpushup:function(a){if(s.e3LoadDuration=q.tl_e3Loaded-q.tl_adpStart,this.config.platform=a.platform,p.disable||this.config.forceDisable)return!1;if(this.sT.triggered)return!1;if(1===this.config.mode&&(this.config.explicitPlatform&&-1===this.$.inArray(this.config.pageGroup,this.config.setupMap[this.config.platform])||!this.config.explicitPlatform&&-1===this.$.inArray(this.config.pageGroup,this.config.setupMap.DESKTOP)&&-1===this.$.inArray(this.config.pageGroup,this.config.setupMap.MOBILE)&&-1===this.$.inArray(this.config.pageGroup,this.config.setupMap.TABLET))&&(this.config.mode=3),3===this.config.mode)return this.sT.ct="determined",void this.triggerControl();this.sT.triggered=!0,q.tl_adpTriggered=+new Date,s.apTriggerDuration=+new Date-q.tl_adpStart;var b,c=0;return this.json=a,this.sT.urlMd5=this.json.urlMd5||null,this.sT.responseTime=q.tl_e3Loaded-q.tl_e3Requested,"object"==typeof this.json&&this.json.success&&2!==this.json.mode&&!this.config.forceE3Fail&&"undefined"!=typeof this.json.customJs&&"string"==typeof this.json.customJs.beforeAp&&(b=e.base64Decode(this.json.customJs.beforeAp),this.runScript(b),this.sT.beforeAp=b),1!==this.config.mode||"undefined"!=typeof a&&0!==this.json.success&&!this.config.forceE3Fail?(this.sT.e3success=this.json.success,this.sT.e3ts=this.json.time,13!==a.mode&&a.mode!==this.config.mode&&(c=1),this.config.forceAdpushup||this.sT.controlTriggered||!c&&13!==a.mode||(1===c?(this.config.mode=9,this.sT.ct="modeDiscrepancy"):(this.config.mode=13,this.sT.ct="noIncontentAds"),this.triggerControl()),void(this.sT.controlTriggered||this.createAdPushupAds())):(this.sT.ct="e3fail",this.config.mode=7,void this.triggerControl())},createAdPushupAdsSync:function(){function a(a){j.sT.adsDisplayed=!0;var c={success:0,reason:0};return"object"!=typeof a?(c.invalidAdObject=1,c.reason=2,l.push(c),b(),!1):(c.ad=a,void j.getAdContainer(a,k,c).done(function(a){j.placeAd(a.container,a.ad),a.feedback.success=1,m||(m=!0,s.firstAdImpressionDuration=+new Date-q.tl_adpStart),i--}).fail(function(a){a.feedback.reason=1}).always(function(a){l.push(a.feedback),b()}))}function b(){if(i&&k<g.length)a(g[k++]);else{j.sT.cF.push(12);var b,d,h,m=0,n=0,o=0;for(m=n=o=0,b=l,d=b[m];m<b.length;d=b[++m])d.success?n++:o++;j.sT.adsSucceeded=n,j.sT.adsFailed=o,j.sT.ads=l,"undefined"!=typeof j.json.customJs&&"string"==typeof j.json.customJs.afterAp&&(h=e.base64Decode(j.json.customJs.afterAp),j.runScript(h),j.sT.afterAp=h),c(),f&&(clearInterval(f),f=null),j.finish()}}function c(){var a,b=[],c=0,f=l.length;if(f){for(c=0;f>c;c++)a=l[c],a.feedbackSent||(b.push({ad:a.ad.sectionMd5||null,success:a.success,reason:a.reason}),a.feedbackSent=!0);b.length&&e.sendFeedback({type:1,feedback:b,timeline:d.logTimelineEvent?s:void 0})}}var f,g=this.json.ads||null,h=this.json.adCount||3,i=h,j=this,k=0,l=[],m=!1;b(),f=setInterval(c,this.config.xpathWaitTimeout)},createAdPushupAdsAsync:function(){function a(){var a,b=[],c=0,f=r.length;if(f){for(c=0;f>c;c++)a=r[c],a.feedbackSent||(b.push({ad:a.ad.sectionMd5||null,success:a.success,reason:a.reason}),a.feedbackSent=!0);b.length&&e.sendFeedback({type:1,feedback:b,timeline:d.logTimelineEvent?s:void 0})}}function b(b){if(l&&(b.feedback.success&&(l--,n.placeAd(n.getContainer(b.feedback.ad,p++),b.feedback.ad),t||(t=!0,s.firstAdImpressionDuration=+new Date-q.tl_adpStart)),b.feedback.success?this.sT.adsSucceeded++:this.sT.adsFailed++),!l&&!o){if(o=1,this.sT.ads=r,"undefined"!=typeof this.json.customJs&&"string"==typeof this.json.customJs.afterAp){var c=e.base64Decode(this.json.customJs.afterAp);this.runScript(c),this.sT.afterAp=c}this.sT.cF.push(12),a(),i&&(clearInterval(i),i=null),this.finish()}}var c,f,g,h,i,j=this.json.ads||null,k=this.json.adCount||3,l=k,n=this,o=0,p=1,r=[],t=!1;for(f=0,g=j,h=g[f];f<Math.min(g.length,k);h=g[++f])this.sT.adsDisplayed=!0,c={success:0,reason:0},"object"==typeof h?(c.ad=h,this.getAdContainer(h,f+1,c,1).done(function(a){a.feedback.success=1}).fail(function(a){a.feedback.reason=1}).always(function(a){r.push(a.feedback),b.call(n,a)})):(c.invalidAdObject=1,c.reason=2,r.push(c),b.call(this,{feedback:c}));j.length>k&&m.setTimeout(function(){for(f=k,g=j,h=g[f];f<j.length;h=g[++f])c={success:0,reason:0},"object"==typeof h?(c.ad=h,n.getAdContainer(h,f+1,c,1).done(function(a){a.feedback.success=1}).fail(function(a){a.feedback.reason=1}).always(function(a){r.push(a.feedback),o||b.call(n,a)})):(c.invalidAdObject=1,c.reason=2,r.push(c),b.call(this,{feedback:c}))},n.config.fallbackAdsDelay),i=setInterval(function(){l&&!o&&a(),!l&&o&&clearInterval(i)},this.config.xpathWaitTimeout)},createAdPushupAds:function(){var a=this.json.ads||null,b=this.json.adCount||3,c=this.config.displayMethod;return this.sT.adPushupTriggered||this.sT.adsDisplayed?!1:(this.sT.adPushupTriggered=!0,this.sT.cF.push(5),a instanceof Array&&0!==a.length&&!this.config.forceNoAdsByE3?(this.sT.adsCount=a.length,this.sT.displayCount=b,this.sT.adsSucceeded=this.sT.adsFailed=0,this.sT.displayMethod=c,void(2===c?this.createAdPushupAdsAsync():this.createAdPushupAdsSync())):(this.sT.adsCount=0,this.config.mode=8,this.sT.ct="noAds",void this.triggerControl()))},getAdContainer:function(a,b,c,d){var e=this.$.Deferred(),f=this;return i.watch(a.xpath,this.config.xpathWaitTimeout).done(function(g,h){c.method=h,e.resolve({ad:a,feedback:c,container:1===d?null:f.getContainer(a,b)})}).fail(function(b,d){c.method=d,c.xpathMiss=1,e.reject({ad:a,feedback:c,container:null})}),e.promise()},getContainer:function(a,b){var c=this.$(a.xpath),d=this.$("<ins/>").css(this.$.extend({display:"block",clear:"both",width:a.width,height:a.height},a.css)).attr({id:"_ap_adpushup_ad_"+b,"data-variation":a.variationName,"data-section":a.sectionMd5,"class":"_ap_adpushup_ad"});switch(a.operation){case"Append":c.append(d);break;case"Prepend":c.prepend(d);break;case"Insert Before":c.before(d);break;default:c.after(d)}return d},placeAd:function(a,b){var c;try{c=this.config.loadDummyAds?f.generateAdCode("dummy",b):b.custom&&"string"==typeof b.code?e.base64Decode(b.code):f.generateAdCode(b.network,b),this.$.ajaxSettings.cache=!0,b.adslot?a.append(c):e.runPostScribe(a,c),(q.tl_adpAd=q.tl_adpAd||[]).push(+new Date),this.$.ajaxSettings.cache=!1,this.tracker.add(a,function(a){14!==this.config.mode&&e.sendBeacon(r.config.feedbackUrl,{packetId:this.config.packetId,siteId:this.config.siteId,pageGroup:this.config.pageGroup,urlMd5:this.sT.urlMd5,eventType:2,ad:a,clickFeedbackMethod:j.dataSendingMethod})}.bind(this,b.sectionMd5)),k.trackActiveView(a,function(a){14!==this.config.mode&&e.sendFeedback({type:6,ad:a,ts:+new Date})}.bind(this,b.sectionMd5))}catch(d){this.err.push({msg:"Error in placing ad.",ad:b,error:d})}return!0},triggerControl:function(){return this.sT.controlTriggered||this.sT.adsDisplayed?!1:(this.sT.controlTriggered=!0,q.tl_controlTriggered=+new Date,s.controlImpressionDuration=+new Date-q.tl_adpStart,this.sT.cF.push(7),this.sT.adsDisplayed=!0,p.control.trigger({ct:this.sT.ct||!0,feedbackUrl:this.config.feedbackUrl,tracker:this.tracker,tL:q,cif:{packetId:this.config.packetId,siteId:this.config.siteId,pageGroup:this.config.pageGroup,apJsVersion:this.version,referrer:this.config.referrer,tracking:j.trackerSupported,eventType:3,adpushupDetectedMode:this.config.adpushupDetectedMode,mode:this.config.mode,url:this.config.pageUrl,timeline:d.logTimelineEvent?JSON.stringify(s):void 0},ccf:{packetId:this.config.packetId,siteId:this.config.siteId,pageGroup:this.config.pageGroup,url:this.config.pageUrl,eventType:4}}),void this.finish())},runScript:function(a){var b=document.createElement("script");b.type="text/javascript",b.text=a,b.html=a,(n.getElementsByTagName("head")[0]||n.getElementsByTagName("body")[0]).appendChild(b)},processCommands:function(){if("string"==typeof m.location.hash){var a=m.location.hash;a.indexOf("#_ap_loadConsole")>=0&&(this.config.loadConsole=!0),a.indexOf("#_ap_loadDummyAds")>=0&&(this.config.loadDummyAds=!0),a.indexOf("#_ap_forceDisable")>=0&&(this.config.forceDisable=!0),a.indexOf("#_ap_forceControl")>=0&&(this.config.forceControl=!0),a.indexOf("#_ap_forceAdpushup")>=0&&(this.config.forceAdpushup=!0),a.indexOf("#_ap_forceRequestFail")>=0&&(this.config.forceRequestFail=!0),a.indexOf("#_ap_forceE3Fail")>=0&&(this.config.forceE3Fail=!0),a.indexOf("#_ap_forceNoAdsByE3")>=0&&(this.config.forceNoAdsByE3=!0),a.indexOf("#_ap_forceDummyFeedback")>=0&&(this.config.forceDummyFeedback=!0)}},finish:function(){q.tl_apFinish=+new Date,this.sT.cF.push(11),this.config.loadConsole&&!this.sT.cL&&(this.sT.cL=!0,this.$.getScript(this.config.consoleUrl))}}),function(){p.configure&&p.configure.config&&r.configure(p.configure.config);var a=document.getElementsByTagName,b=[];document.getElementsByTagName=function(c){return"ins"===c&&setTimeout(function(){var c,f,g,h,i,j=a.call(document,"ins");for(c=0;c<j.length;c++)f=j[c].getAttribute("data-adsbygoogle-status"),g=j[c].parentElement,h=g.getAttribute("id"),"done"===f&&h&&h.match(/_ap_(adpushup|control)/)&&-1===o.inArray(h,b)&&(i||(i={}),i["tl_"+h+"_displayed"]=+new Date,b.push(h));i&&d.logAdDisplayedEvent&&(i.type=5,e.sendFeedback(i))},1e3),a.call(document,c)},!p.disable&&r.init(),m.setTimeout(function(){q.tl_e3Requested&&q.tl_e3Loaded||r.sT.controlTriggered||p.disable||(r.sT.cF.push(14),r.sT.ct="requestFail",r.config.mode=6,r.triggerControl())},q.tl_e3Requested&&!q.tl_e3Loaded&&+new Date-q.tl_e3Requested>=r.config.engineRequestTimeout?0:q.tl_e3Requested&&!q.tl_e3Loaded?r.config.engineRequestTimeout-(+new Date-q.tl_e3Requested):r.config.engineRequestTimeout)}()},{"./config/config.js":1,"./libs/custom/adCodeGenerator.js":2,"./libs/custom/analytics.js":3,"./libs/custom/browserConfig.js":4,"./libs/custom/control.js":5,"./libs/custom/heartBeat.js":6,"./libs/custom/nodeWatcher.js":7,"./libs/custom/tracker.js":8,"./libs/custom/utils.js":9}]},{},[10])};